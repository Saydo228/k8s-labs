# 1. БАЗА: Берем официальный легкий Linux с уже установленным Python
FROM python:3.9-slim

# 2. РАБОЧАЯ ПАПКА: Создаем папку внутри контейнера, где будем работать
WORKDIR /app

# 3. КЭШ ЗАВИСИМОСТЕЙ: Сначала копируем только список библиотек
# Это хитрость! Если мы не меняли список библиотек, Docker не будет их качать заново.
COPY requirements.txt .

# 4. УСТАНОВКА: Ставим библиотеки (Flask)
RUN pip install --no-cache-dir -r requirements.txt

# 5. КОД: Теперь копируем сам код приложения
COPY . .

# 6. ПОРТ: Говорим, что программа будет работать на порту 5000
EXPOSE 5000

# 7. ЗАПУСК: Какую команду выполнить при старте контейнера
CMD ["python", "main.py"]
